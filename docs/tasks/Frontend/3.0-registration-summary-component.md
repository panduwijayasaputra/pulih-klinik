# Task 3.0: Create Registration Summary Component

## Relevant Files

- `frontend/src/components/auth/RegistrationSummary.tsx` - New registration summary component (created with full functionality)
- `frontend/src/components/auth/RegisterFlow.tsx` - Registration flow (updated to use RegistrationSummary component)
- `frontend/src/types/registration.ts` - Updated types for token-based model (removed subscription types, added token package types)
- `frontend/src/store/registration.ts` - Store with summary data (already updated in Task 1.0)
- `frontend/src/components/auth/RegistrationSummary.test.tsx` - Unit tests (to be created)

### Notes

- Use mock data for pricing and business rules
- Unit tests should be placed alongside the code files they are testing
- Use `npx jest [optional/path/to/test/file]` to run tests

## Tasks

- [x] 3.1 Create RegistrationSummary component
  - [x] Display clinic information summary
    - Show clinic name, address, and contact details
    - Display admin information
    - Add edit functionality to modify clinic data
    - Add visual confirmation of data accuracy
  - [x] Show selected subscription tier details
    - Remove subscription tier display (no longer needed)
    - Add token package information display
    - Show included tokens (3 tokens with registration)
    - Display future token pricing (IDR 20,000/token)
  - [x] Display pricing breakdown (registration fee + tokens)
    - Show registration fee: IDR 100,000
    - Show included tokens: 3 tokens
    - Show total value calculation
    - Add tax calculation (if applicable)
  - [x] Add edit functionality to go back to previous steps
    - Add edit buttons for clinic information
    - Add navigation back to clinic form
    - Preserve form data when editing
    - Add confirmation for data changes

- [x] 3.2 Update pricing structure to match PRD
  - [x] Change from subscription model to token-based model
    - Remove subscription tier types and interfaces
    - Add token package types and interfaces
    - Update pricing constants
    - Remove subscription-related components
  - [x] Update pricing to IDR 100,000 registration fee (includes 3 tokens)
    - Set registration fee constant
    - Add token value calculation
    - Update pricing display logic
    - Add currency formatting
  - [x] Remove monthly subscription tiers
    - Remove subscription selector component
    - Update registration flow to skip subscription step
    - Remove subscription data from store
    - Update types and schemas
  - [x] Add token package information
    - Add token package display component
    - Show token usage information
    - Add token purchase information
    - Display token limits and rules

- [x] 3.3 Update business rules display
  - [x] Show therapist limit (max 3 therapists per clinic)
    - Add therapist limit display
    - Show current therapist count
    - Add upgrade information for more therapists
    - Display therapist management rules
  - [x] Show client limit (max 5 new clients per clinic per day)
    - Add daily client limit display
    - Show current client count
    - Add client limit reset information
    - Display client management rules
  - [x] Display token usage information
    - Show token consumption per session
    - Display token balance tracking
    - Add token purchase options
    - Show token expiration information
  - [x] Add terms and conditions acceptance
    - Add terms and conditions checkbox
    - Display terms and conditions text
    - Add privacy policy acceptance
    - Add service agreement acceptance

## Implementation Steps

### Step 1: Create RegistrationSummary Component
```typescript
// In components/auth/RegistrationSummary.tsx
interface RegistrationSummaryProps {
  clinicData: ClinicDataFormData;
  onEditClinic: () => void;
  onProceedToPayment: () => void;
}

export const RegistrationSummary: React.FC<RegistrationSummaryProps> = ({
  clinicData,
  onEditClinic,
  onProceedToPayment
}) => {
  const [agreeTerms, setAgreeTerms] = useState(false);
  
  const registrationFee = 100000;
  const includedTokens = 3;
  const tokenValue = includedTokens * 20000; // IDR 20,000 per token
  const totalValue = registrationFee + tokenValue;
  
  // Implementation details...
};
```

### Step 2: Update Types for Token-Based Model
```typescript
// In types/registration.ts
export interface TokenPackage {
  registrationFee: number;
  includedTokens: number;
  tokenPrice: number;
  totalValue: number;
}

export interface BusinessRules {
  maxTherapists: number;
  maxDailyClients: number;
  tokenPerSession: number;
  tokenExpirationDays: number;
}

export const TOKEN_PACKAGE: TokenPackage = {
  registrationFee: 100000,
  includedTokens: 3,
  tokenPrice: 20000,
  totalValue: 160000
};

export const BUSINESS_RULES: BusinessRules = {
  maxTherapists: 3,
  maxDailyClients: 5,
  tokenPerSession: 1,
  tokenExpirationDays: 365
};
```

### Step 3: Update Store
```typescript
// In store/registration.ts
interface RegistrationStore {
  // ... existing properties
  tokenPackage: TokenPackage;
  businessRules: BusinessRules;
  agreeTerms: boolean;
  updateTokenPackage: (package: TokenPackage) => void;
  setAgreeTerms: (agree: boolean) => void;
}
```

## Testing Checklist

- [ ] Test clinic information display accuracy
- [ ] Test edit functionality navigation
- [ ] Test pricing calculation accuracy
- [ ] Test business rules display
- [ ] Test terms and conditions acceptance
- [ ] Test component integration with store
- [ ] Test responsive design
- [ ] Test accessibility features

## Mock Data

```typescript
// Mock clinic data for testing
export const mockClinicData = {
  name: 'Klinik Sehat Jiwa Jakarta',
  province: 'DKI Jakarta',
  city: 'Jakarta Pusat',
  address: 'Jl. Sudirman No. 123, Blok A, Lantai 2',
  phone: '021-1234567',
  email: 'info@kliniksehat.com',
  website: 'https://kliniksehat.com',
  officeHours: 'Senin-Jumat 08:00-17:00',
  adminName: 'Dr. Sari Wulandari',
  adminEmail: 'admin@kliniksehat.com',
  adminWhatsapp: '+62-812-3456-7890',
  adminPosition: 'Direktur Klinik'
};

// Mock token package data
export const mockTokenPackage = {
  registrationFee: 100000,
  includedTokens: 3,
  tokenPrice: 20000,
  totalValue: 160000,
  description: 'Paket registrasi termasuk 3 token sesi terapi'
};

// Mock business rules
export const mockBusinessRules = {
  maxTherapists: 3,
  maxDailyClients: 5,
  tokenPerSession: 1,
  tokenExpirationDays: 365,
  description: 'Batas maksimal 3 therapist dan 5 klien baru per hari'
};

// Mock terms and conditions
export const mockTermsAndConditions = {
  serviceTerms: 'Syarat dan Ketentuan Layanan Terapintar',
  privacyPolicy: 'Kebijakan Privasi dan Perlindungan Data',
  serviceAgreement: 'Perjanjian Layanan dan Penggunaan Platform'
};
```

## Component Structure

```
RegistrationSummary/
├── RegistrationSummary.tsx
├── RegistrationSummary.test.tsx
├── components/
│   ├── ClinicInfoSummary.tsx
│   ├── TokenPackageDisplay.tsx
│   ├── BusinessRulesDisplay.tsx
│   └── TermsAndConditions.tsx
└── hooks/
    └── useRegistrationSummary.ts
```

## UI/UX Considerations

- Clear visual hierarchy for information display
- Prominent pricing and value proposition
- Easy edit functionality with clear navigation
- Responsive design for mobile devices
- Accessible form controls and navigation
- Clear terms and conditions presentation
- Professional and trustworthy appearance
